<html>
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  
<script type="text/javascript" src="/js/prototype.js"></script>
<script type="text/javascript" src="/js/rico.js"></script>
<script type="text/javascript" src="/js/visiblekernel.js"></script>
<script type="text/javascript" src="/js/kernel.js"></script>
<script type="text/javascript" src="/js/controls.js"></script>
<script type="text/javascript" src="/js/effects.js"></script>
<script type="text/javascript" src="/js/dragdrop.js"></script>
<script language="JavaScript" type="text/javascript" src="jsunit/app/jsUnitCore.js"></script>


</head>

<body >
  <h1>JsUnit OnLoad Tests</h1>

  <p>This page contains tests for Popweb.
  To see them, take a look at the source.</p>

    <div id="background">
    </div>

    <script language="JavaScript" type="text/javascript">

    var vkernel;

    function setUp(){
        vkernel = VisibleKernel.create(1,100,200,300,400,0);
    }

    function testCreateVisibleKernel() {
        assertEquals('test x','100',vkernel.x);
        assertEquals('test y','200',vkernel.y);
        assertEquals('test width','300',vkernel.width);
        assertEquals('test height','400',vkernel.height);
        assertEquals('test collapsed','0',vkernel.collapsed);
        assertEquals('test name','',vkernel.kernel.name);
        assert('container id is not null',vkernel.container_id > 0);
        assert('kernel id is not null',vkernel.kernel.id > 0);
        assertEquals('test id',vkernel.container_id+'/'+vkernel.kernel.id,vkernel.id);
    }

    function testRealize() {
        vkernel.realize($(background));
        assertEquals('test x','100',vkernel.x);
        assertEquals('test y','200',vkernel.y);
        assertEquals('test width','300',vkernel.width);
        assertEquals('test height','400',vkernel.height);
        assertEquals('test collapsed','0',vkernel.collapsed);
    }

    function testUpdate() {
        assert('container id is not null',vkernel.container_id > 0);
        assert('contained id is not null',vkernel.kernel.id > 0);
        vkernel.realize($(background));
        vkernel.setX(400);
        vkernel.setY(500);
        vkernel.setWidth(600);
        vkernel.setHeight(700);
        vkernel.setCollapsed(1);
        vkernel.sync();
        vkernel = VisibleKernel.retrieve(vkernel.container_id,vkernel.kernel.id);
        assertEquals('test x','400',vkernel.x);
        assertEquals('test y','500',vkernel.y);
        assertEquals('test width','600',vkernel.width);
        assertEquals('test height','700',vkernel.height);
        assertEquals('test collapsed','1',vkernel.collapsed);
        assert('container id is not null',vkernel.container_id > 0);
        assert('kernel id is not null',vkernel.kernel.id > 0);
        assertEquals('test id',vkernel.container_id+'/'+vkernel.kernel.id,vkernel.id);
    }

    function tearDown() {
        // TODO delete vkernel here
    }

    </script>
</body>
</html>
